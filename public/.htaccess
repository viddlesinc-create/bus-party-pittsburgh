# Pitt Party Bus - Hostinger Configuration
# This file ensures pre-rendered HTML pages are served correctly

# Enable Rewrite Engine
RewriteEngine On

# Force HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Serve pre-rendered HTML files for routes
# Homepage
RewriteRule ^$ /index.html [L]

# Main pages - serve .html files directly
RewriteRule ^fleet/?$ /fleet.html [L]
RewriteRule ^events/?$ /events.html [L]
RewriteRule ^locations/?$ /locations.html [L]
RewriteRule ^pricing/?$ /pricing.html [L]
RewriteRule ^contact/?$ /contact.html [L]
RewriteRule ^faqs/?$ /faqs.html [L]
RewriteRule ^blog/?$ /blog.html [L]
RewriteRule ^testimonials/?$ /testimonials.html [L]
RewriteRule ^privacy/?$ /privacy.html [L]
RewriteRule ^terms/?$ /terms.html [L]

# Blog posts - serve nested .html files
RewriteRule ^blog/party-bus-pricing-guide/?$ /blog/party-bus-pricing-guide.html [L]
RewriteRule ^blog/top-events-pittsburgh/?$ /blog/top-events-pittsburgh.html [L]
RewriteRule ^blog/party-bus-vs-limo/?$ /blog/party-bus-vs-limo.html [L]
RewriteRule ^blog/bachelor-bachelorette-ideas/?$ /blog/bachelor-bachelorette-ideas.html [L]
RewriteRule ^blog/wedding-transportation/?$ /blog/wedding-transportation.html [L]
RewriteRule ^blog/corporate-event-transportation/?$ /blog/corporate-event-transportation.html [L]
RewriteRule ^blog/concert-party-bus/?$ /blog/concert-party-bus.html [L]
RewriteRule ^blog/prom-transportation-safety/?$ /blog/prom-transportation-safety.html [L]
RewriteRule ^blog/party-bus-safety-tips/?$ /blog/party-bus-safety-tips.html [L]
RewriteRule ^blog/accurate-party-bus-estimate/?$ /blog/accurate-party-bus-estimate.html [L]

# If none of the above match, fall back to index.html for client-side routing
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.html [L]

# Browser caching for static assets - Aggressive caching for immutable assets
<IfModule mod_expires.c>
  ExpiresActive On
  # Images - 1 year (immutable with hash in filename)
  ExpiresByType image/jpg "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType image/x-icon "access plus 1 year"
  ExpiresByType image/ico "access plus 1 year"
  # CSS and JS - 1 year (Vite adds hashes to filenames)
  ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"
  ExpiresByType text/javascript "access plus 1 year"
  # Fonts - 1 year
  ExpiresByType font/woff2 "access plus 1 year"
  ExpiresByType font/woff "access plus 1 year"
  ExpiresByType font/ttf "access plus 1 year"
  ExpiresByType application/font-woff2 "access plus 1 year"
  ExpiresByType application/font-woff "access plus 1 year"
  # Other
  ExpiresByType application/pdf "access plus 1 month"
  # HTML - Short cache for dynamic content
  ExpiresByType text/html "access plus 0 seconds"
</IfModule>

# Cache-Control headers for hashed assets
<IfModule mod_headers.c>
  # Immutable assets (Vite adds hashes)
  <FilesMatch "\.(js|css|woff2|woff|ttf|jpg|jpeg|png|webp|svg|ico)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
  # HTML files - no cache
  <FilesMatch "\.html$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
  </FilesMatch>
</IfModule>

# Compression - Enable gzip/brotli
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json application/xml font/woff2
</IfModule>
